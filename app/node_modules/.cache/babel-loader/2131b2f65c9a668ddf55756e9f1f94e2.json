{"remainingRequest":"/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/node_modules/babel-loader/lib/index.js!/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/node_modules/eslint-loader/index.js??ref--13-0!/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/src/store/modules/user.js","dependencies":[{"path":"/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/src/store/modules/user.js","mtime":1617089222446},{"path":"/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ0AvYXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICB1c2VyVG9rZW46IG51bGwsCiAgICBsb2dnZWRJbjogZmFsc2UKICB9LAogIGdldHRlcnM6IHsKICAgIGxvZ2dlZEluOiBzdGF0ZSA9PiBzdGF0ZS5sb2dnZWRJbgogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVVNFUjogKHN0YXRlLCB0b2tlbikgPT4gewogICAgICBpZiAodG9rZW4pIHsKICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSB0b2tlbjsKICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUudXNlclRva2VuID0gbnVsbDsKICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgQ0hFQ0tfVVNFUjogc3RhdGUgPT4gewogICAgICB0cnkgewogICAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IHRva2VuOwogICAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSBudWxsOwogICAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHJlZ2lzdGVyOiBhc3luYyAoewogICAgICBkaXNwYXRjaAogICAgfSwgX3VzZXIpID0+IHsKICAgICAgY29uc3QgdXNlciA9IHsKICAgICAgICBlbWFpbDogX3VzZXIuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IF91c2VyLnBhc3N3b3JkCiAgICAgIH07CiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJy91c2Vycy9yZWdpc3RlcicsIF91c2VyKTsKICAgICAgZGlzcGF0Y2goJ2xvZ2luJywgewogICAgICAgIHVzZXIKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46ICh7CiAgICAgIGNvbW1pdAogICAgfSwgcGF5bG9hZCkgPT4gewogICAgICBheGlvcy5wb3N0KCcvdXNlcnMvbG9naW4nLCBwYXlsb2FkLnVzZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgcmVzLmRhdGEudG9rZW4pOwoKICAgICAgICAgIGlmIChwYXlsb2FkLnJvdXRlKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKHBheWxvYWQucm91dGUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrVXNlcjogKHsKICAgICAgY29tbWl0CiAgICB9KSA9PiB7CiAgICAgIGNvbW1pdCgnQ0hFQ0tfVVNFUicpOwogICAgfSwKICAgIGxvZ291dDogKHsKICAgICAgY29tbWl0CiAgICB9KSA9PiB7CiAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIG51bGwpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/thereselidbom/Desktop/FRONTEND/eCommerce2.0/eCommerce/app/src/store/modules/user.js"],"names":["axios","router","state","userToken","loggedIn","getters","mutations","SET_USER","token","CHECK_USER","localStorage","getItem","err","console","log","actions","register","dispatch","_user","user","email","password","post","login","commit","payload","then","res","status","setItem","data","route","push","checkUser","logout","removeItem"],"mappings":"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","sourcesContent":["import axios from '@/axios'\nimport router from '@/router'\n\nexport default {\n  state: {\n    userToken: null,\n    loggedIn: false\n  },\n  getters: {\n    loggedIn: state => state.loggedIn\n  },\n  mutations: {\n    SET_USER: (state, token) => {\n      if(token) {\n        state.userToken = token\n        state.loggedIn = true\n      } else {\n        state.userToken = null\n        state.loggedIn = false\n      }\n    },\n    CHECK_USER: state => {\n      try {\n        let token = localStorage.getItem('token')\n        if(token) {\n          state.userToken = token\n          state.loggedIn = true\n        } else {\n          state.userToken = null\n          state.loggedIn = false\n        }\n      }\n      catch(err) {\n        console.log(err)\n      }\n    }\n  },\n  actions: {\n    register: async ({dispatch}, _user) => {\n      const user = {\n        email: _user.email,\n        password: _user.password\n      }\n      await axios.post('/users/register', _user)\n      dispatch('login', {user})\n    },\n    login: ({commit}, payload) => {\n      axios.post('/users/login', payload.user)\n        .then(res => {\n          if(res.status === 200) {\n            \n            localStorage.setItem('token', res.data.token)\n            commit('SET_USER', res.data.token)\n\n            if(payload.route) {\n              router.push(payload.route)\n            } else {\n              router.push('/')\n            }\n          }\n        })\n    },\n    checkUser: ({commit}) => {\n      commit('CHECK_USER')\n    },\n    logout: ({commit}) => {\n      let token = localStorage.getItem('token')\n      if(token) {\n        localStorage.removeItem('token')\n\n        commit('SET_USER', null)\n      }\n    }\n  }\n}"]}]}